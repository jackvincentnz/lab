load("@rules_java//java:defs.bzl", "java_test")

java_test(
    name = "asset_test", 
    srcs = glob(["*.java"]), # This will pick up AssetMutationTest.java when it's created
    test_class = "nz.geek.jack.mops.core.adapter.api.gql.asset.AssetMutationTest",
    deps = [
        "//services/mops/src/main/java/nz/geek/jack/mops/core/adapter/api/gql/asset", # The code being tested (:asset)
        "//services/mops/src/main/java/nz/geek/jack/mops/core/application/asset", # For AssetCommandService, CreateAssetCommand
        "//services/mops/src/main/java/nz/geek/jack/mops/core/domain/asset",     # For domain.Asset, used by AssetCommandService
        "//services/mops/src/main/resources/schema:java", # For DGS generated types

        # JUnit Jupiter
        "@maven//:org_junit_jupiter_junit_jupiter_api",
        "@maven//:org_junit_jupiter_junit_jupiter_params", # If parameterized tests are used
        "@maven//:org_junit_jupiter_junit_jupiter_engine", # Runtime test engine

        # Mockito
        "@maven//:org_mockito_mockito_core",
        "@maven//:org_mockito_mockito_junit_jupiter", # For MockitoExtension

        # DGS Testing Framework
        "@maven//:com_netflix_graphql_dgs_graphql_dgs_spring_boot_starter_test",
        
        # AssertJ
        "@maven//:org_assertj_assertj_core",

        # Spring Test
        "@maven//:org_springframework_spring_test",
        "@maven//:org_springframework_boot_spring_boot_test",
    ],
)
