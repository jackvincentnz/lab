load("//tools/bazel:java.bzl", "DGS_TEST_DEPS", "DGS_TEST_RUNTIME_DEPS", "SPRING_TEST_DEPS", "SPRING_TEST_RUNTIME_DEPS", "java_test_suite")

# TODO: We should hoist these resources to common package for integration tests to avoid this in each package
java_library(
    name = "test_resources",
    testonly = True,
    resources = [
        "//projects/organizer/journal/src/main/resources",
        "//projects/organizer/journal/src/main/resources/schema",
    ],
    visibility = ["//visibility:private"],
)

java_test_suite(
    name = "tests",
    runtime_deps = [":test_resources"] + SPRING_TEST_RUNTIME_DEPS + DGS_TEST_RUNTIME_DEPS,
    deps = [
        "//projects/organizer/journal/src/main/java/lab/journal/adapter/api/gql",
        "//projects/organizer/journal/src/main/java/lab/journal/adapter/api/gql/schema",
        "//projects/organizer/journal/src/main/java/lab/journal/application/entry",
        "//projects/organizer/journal/src/main/java/lab/journal/config",
        "//projects/organizer/journal/src/main/java/lab/journal/domain",
        "@maven//:com_netflix_graphql_dgs_codegen_graphql_dgs_codegen_shared_core",
        "@maven//:com_netflix_graphql_dgs_graphql_dgs_client",
    ] + SPRING_TEST_DEPS + DGS_TEST_DEPS,
)
