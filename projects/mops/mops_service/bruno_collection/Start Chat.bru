meta {
  name: Start Chat
  type: graphql
  seq: 2
}

post {
  url: http://localhost:8080/graphql
  body: graphql
  auth: inherit
}

body:graphql {
  mutation {
    startChat(input:{content:"How much am I spending in Q1 in my Annual Marketing Budget 2025?"}) {
      code
      success
      message
      chat {
        id
        messages {
          id
          type
          status
          content
          createdAt
          updatedAt
        }
        createdAt
        updatedAt
      }
    }
  }
}

script:post-response {
  bru.setVar("chatId", res.body.data.startChat.chat.id);
}

settings {
  encodeUrl: true
}
